generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Raid {
  raidId           String    @id
  raidTitle        String
  difficulty       String
  startAt          DateTime
  endAt            DateTime?
  notes            String?
  channelId        String
  messageId        String?   @unique
  scheduledEventId String?   @unique
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  @@map("Raid")
  @@index([startAt])
  @@index([channelId])
}


model Signup {
  id        String   @id @default(cuid())
  raidId    String
  userId    String
  username  String
  role      String   // TANK | HEALER | MELEE | RANGED | MAYBE | ABSENT
  status    String   @default("JOINED")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([raidId, userId])  // pozwala na upsert po (raidId,userId)
  @@index([raidId])
  @@map("Signup")
}
