generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Raid {
  raidId           String   @id
  raidTitle        String
  difficulty       String
  startAt          DateTime
  endAt            DateTime?
  notes            String?
  channelId        String
  messageId        String?  @unique
  scheduledEventId String?  @unique
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  // zamiast enuma:
  status           String   @default("CREATED") // "CREATED" | "STARTED" | "ENDED"

  @@map("Raid")
  @@index([startAt])
  @@index([channelId])
}

model Signup {
  id        String   @id @default(cuid())
  raidId    String
  userId    String
  username  String
  role      String
  status    String   @default("JOINED")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([raidId, userId])
  @@index([raidId])
  @@map("Signup")
}

model PlayerProfile {
  id        String   @id @default(cuid())
  guildId   String
  userId    String
  classKey  String
  specKey   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([guildId, userId])
}
